<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>DME Scripts Demo</title>
    </h:head>
    <h:body> 
    	<h:outputStylesheet library="default" name="css/style.css"  />	<!-- Place in body to insure that my styles load after PrimeFaces' -->

    	<h:outputScript library="default" name="js/CustomTree.js" />

		<h3 class="title">DME Scripts Order</h3>
		<h:outputText value="&#160;" />
			
    	<h:form id="orderProduct" styleClass="demo">

			<p:panelGrid id="orderGrid" >
				<p:row style="background-color: #afc4d6;">
					<p:column>
						<p:tree id="catheters" widgetVar="catheterTree" value="#{orderController2.catheters}" var="node" orientation="horizontal" selectionMode="single" >
							<p:treeNode type="category">
								<h:outputText value="#{node}" />
							</p:treeNode>
							<p:treeNode type="hcpc">
								<h:outputText value="#{node}" />
							</p:treeNode>
							<p:treeNode styleClass="hidden"/>
			
							<p:ajax event="expand" listener="#{orderController2.onNodeExpanded}" oncomplete="postProcessExpand(this, PF('catheterTree'))"/>
							<p:ajax event="collapse" listener="#{orderController2.onNodeCollapsed}"/>
							<p:ajax event="select" listener="#{orderController2.onNodeSelected}" update="orderProduct:orderButton orderProduct:details" oncomplete="postProcessSelect(this, PF('catheterTree'))"/>
						</p:tree>
						
					</p:column>
					<p:column>
						<h:panelGroup id="details">
						    <h:panelGrid columns="1" rendered="#{orderController2.displayPanel(1)}" style="background-color: #9fd1ff;">
								<ui:include src="/WEB-INF/ProcessFlow1.xhtml" />
						    </h:panelGrid>

						    <h:panelGroup rendered="#{orderController2.displayPanel(2)}">
								<h:outputLabel value="[Process Flow 2]"/>
						    </h:panelGroup>
						    <h:panelGroup rendered="#{orderController2.displayPanel(3)}">
								<h:outputLabel value="[Process Flow 3]>"/>
						    </h:panelGroup>
						</h:panelGroup>

					</p:column>
				</p:row>

				<p:row style="background-color: #afc4d6">
					<p:column colspan="2" style="text-align: center">
						<h:panelGroup id="orderButton">
	        	    		<p:commandButton value="Place Order" actionListener="#{orderController2.orderItem}" rendered="#{orderController2.selectedProduct != null}" update="orderStatus" oncomplete="PF('orderStatusDialog').show()"/>
						    <p:dialog id="orderStatus" widgetVar="orderStatusDialog" header="Order Status" showEffect="fold" hideEffect="fold">
						    	<h:outputText value="#{orderController2.orderStatus}"  />
						    </p:dialog>
						</h:panelGroup>
					</p:column>
				</p:row>

			</p:panelGrid>
    	</h:form>

	</h:body>
</html>
