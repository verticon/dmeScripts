<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

    <h:head>
    	<h:outputStylesheet library="default" name="css/style.css"  />
        <title>DME Scripts Demo</title>
    </h:head>
    <h:body> 
		<h3 class="title">DME Scripts Demo</h3>
		<h:outputText value="&#160;" />

		<table align="center" width="600">
	 		<tr><td><h:form rendered="#{!orderController.addingNew}" class="buttons">
	 			<h:outputText value="Orders:  " styleClass="tableName"/>
	    	    <h:commandButton accesskey="n" action="#{orderController.addNew}" value="Add" styleClass="demo"/>
		    </h:form></td></tr>
	
	    	<tr><td><h:form rendered="#{orderController.addingNew}" styleClass="demo">
				<fieldset>
					<legend>New Order</legend>

		        	<h:panelGrid columns="2">
		            	<h:outputText value="Patient"></h:outputText>
						<h:selectOneMenu value="#{orderController.patientId}">
							<f:selectItems value="#{orderController.patients}" var="patient" itemValue="#{patient.id}" itemLabel="#{patient.fullName}" />
							<f:ajax listener="#{orderController.patientSelectionChanged}" />
						</h:selectOneMenu>
		
						<p:tree value="#{orderController.productTree}" var="node" dynamic="true" orientation="horizontal">
							<p:treeNode>
								<h:outputText value="#{node}" />
							</p:treeNode>
						</p:tree>

						<h:graphicImage url="#{orderController.productImageUrl}" id="productImage"/>
		        	</h:panelGrid>
		
		    	    <h:panelGroup>
		        	    <h:commandButton value="Save" action="#{orderController.save}" accesskey="s" styleClass="demo"/>
		            	<h:commandButton value="Cancel" action="#{orderController.cancel}" accesskey="c" immediate="true" styleClass="demo"/>
			        </h:panelGroup>
				</fieldset>

				<h:outputText value="&#160;" />
	    	</h:form></td></tr>

	    	<tr><td><h:form>
	        	<h:dataTable value="#{orderController.table}" var="order" styleClass="demo" columnClasses="columns, columns">
		            <h:column>
	    	            <f:facet name="header">
	        	            <h:column>
	            	            <h:outputText value="Patient"></h:outputText>
	                	    </h:column>
		                </f:facet>
	    	            <h:outputText value="#{order.patient.fullName}"></h:outputText>
	        	    </h:column>
	
		            <h:column>
	    	            <f:facet name="header">
	        	            <h:column>
	            	            <h:outputText value="Product"></h:outputText>
	                	    </h:column>
		                </f:facet>
	    	            <h:outputText value="#{order.product.name}"></h:outputText>
	        	    </h:column>
	
		            <h:column>
	    	            <f:facet name="header">
	        	            <h:column>
	            	            <h:outputText value="Actions"></h:outputText>
	                	    </h:column>
		                </f:facet>
	    	            <h:panelGrid columns="1">
	        	            <h:commandLink value="delete" action="#{orderController.delete}">
	            	            <f:setPropertyActionListener target="#{orderController.target}" value="#{order}" />
	                	    </h:commandLink>
		                </h:panelGrid>
	    	        </h:column>
	        	</h:dataTable>

				<h:outputText value="&#160;" />
	    	</h:form></td></tr>
	
	
	 		<tr><td><h:form class="buttons">
				<h:commandButton value="Patients" action="Patients" styleClass="demo"/>
				<h:commandButton value="Products" action="Products" styleClass="demo"/>
		    </h:form></td></tr>

    	</table>
	</h:body>
</html>
